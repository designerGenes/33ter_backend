# Dockerfile for Container #2 (Azure + OpenAI)

# Use a base image with Python installed
FROM python:3.9-slim

# Set the working directory
WORKDIR /app

# Install system dependencies (if needed)
RUN apt-get update && apt-get install -y \
    && rm -rf /var/lib/apt/lists/*

# Copy the scripts into the container
COPY scripts/ai/submitToAzure.py /app/submitToAzure.py
COPY scripts/ai/submitToOpenAI.py /app/submitToOpenAI.py

# Install Python dependencies
RUN pip3 install flask requests python-dotenv azure-ai-vision openai

# Create directories for logs
RUN mkdir -p /app/logs

# Expose the port for receiving screenshots
EXPOSE 5001

# Command to run the script
CMD ["python3", "/app/submitToAzure.py"]